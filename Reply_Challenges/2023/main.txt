Πρέπει να σχεδιάσετε πώς θα τοποθετήσετε τα διαθέσιμα S Snakes ώστε να καλύψετε όσο το δυνατόν περισσότερα στοιχεία υψηλής σημασίας.
Μπορείτε να αναπτύξετε κάθε φίδι στο σύστημα, το οποίο αντιπροσωπεύεται από έναν πίνακα R × C.
Κάθε φίδι τοποθετείται τοποθετώντας το σε ένα κελί και δίνοντάς του εντολή να γλιστρήσει σε ένα γειτονικό κελί είτε απευθείας πάνω, κάτω, αριστερά ή δεξιά από αυτό που μόλις επισκέφθηκε, μέχρι το φίδι να φτάσει στο συνολικό του μήκος. Τα φίδια δεν μπορούν να επικαλύπτονται.

Χάρη στα θαύματα του metaverse, τα όρια των χαρτών περιτυλίγονται. Για παράδειγμα, αν ένα φίδι απομακρυνθεί από το πλέγμα διασχίζοντας το αριστερό
σύνορα, θα επανεμφανιστεί ως δια μαγείας στην ίδια σειρά των δεξιών συνόρων. Ομοίως, αν ένα φίδι εγκαταλείψει το χάρτη από το πάνω όριο, θα επανεμφανιστεί στην ίδια
στήλη στο κάτω όριο κ.ο.κ. Ορισμένα κελιά στο πλέγμα δεν αντιπροσωπεύουν στοιχεία, αλλά διακόπτες δικτύου. Πρόκειται για σκουληκότρυπες όπου ένα φίδι μπορεί να εισέλθει και να τηλεμεταφερθεί σε οποιαδήποτε άλλη σκουληκότρυπα του χάρτη. Το πέρασμα μέσα από μια σκουληκότρυπα μετράει ως μία κίνηση.
Πολλαπλά φίδια μπορούν να χρησιμοποιήσουν την ίδια σκουληκότρυπα τόσο για την είσοδο όσο και για την έξοδο, με την προϋπόθεση ότι δεν επικαλύπτουν τα σώματά τους πριν ή μετά την τηλεμεταφορά. Παρακαλώ, θυμηθείτε:


 Τα φίδια δεν μπορούν να αλληλεπικαλύπτονται με άλλα φίδια ή με τον εαυτό τους.
- Το πέρασμα από μια σκουληκότρυπα απαιτεί μόνο ένα τμήμα φιδιού.
- Ένα Φίδι δεν μπορεί να ξεκινήσει ή να τερματίσει σε μια σκουληκότρυπα.
- Πολλαπλά φίδια μπορούν να χρησιμοποιήσουν την ίδια σκουληκότρυπα, αρκεί να μην επικαλύπτονται σε γειτονικά κελιά που δεν είναι σκουληκότρυπες.
- Εάν το κεφάλι ενός φιδιού μετακινηθεί πέρα από το δυτικό όριο του χάρτη, θα επανεμφανιστεί στο ανατολικό όριο στην ίδια σειρά.
- Εάν το κεφάλι ενός φιδιού μετακινηθεί πέρα από το ανατολικό όριο του χάρτη, θα επανεμφανιστεί στο δυτικό όριο στην ίδια σειρά.
- Εάν το κεφάλι ενός φιδιού μετακινηθεί πέρα από το βόρειο όριο του χάρτη, θα επανεμφανιστεί στο νότιο όριο στην ίδια στήλη.
- Εάν το κεφάλι του φιδιού μετακινηθεί πέρα από το νότιο όριο του χάρτη, θα επανεμφανιστεί στο βόρειο όριο στην ίδια στήλη.
Το συνολικό σας σκορ είναι το άθροισμα της συνάφειας των κελιών που καλύπτονται από τα φίδια σας.
Η λύση είναι έγκυρη μόνο αν η συνολική βαθμολογία είναι μεγαλύτερη από 0.

Translated with DeepL.com (free version)

INPUT

Το αρχείο εισόδου είναι ένα κανονικό αρχείο κειμένου ASCII. Κάθε γραμμή του αρχείου εισόδου διαχωρίζεται
με έναν απλό χαρακτήρα "\n" ("UNIX-style"). Εάν μια γραμμή έχει πολλαπλά δεδομένα, κάθε τιμή
διαχωρίζεται με έναν μόνο χαρακτήρα κενών διαστημάτων. Η πρώτη γραμμή του αρχείου εισόδου
θα έχει 3 ακέραιους αριθμούς:
- C, που υποδηλώνει τον αριθμό των στηλών του πλέγματος του συστήματος
- R, που υποδεικνύει τον αριθμό των γραμμών του πλέγματος του συστήματος

 S, που υποδεικνύει τον αριθμό των Snakes που είναι διαθέσιμα στον παίκτη Η δεύτερη γραμμή αποτελείται από S ακέραιες τιμές, με κάθε μία να αντιστοιχεί στο μήκος ενός Snake. Στη συνέχεια, ακολουθούν R γραμμές, με την καθεμία να αποτελείται από C τιμές. Κάθε τιμή μπορεί να είναι είτε:
- Vrc, η τιμή της συνάφειας του στοιχείου στη συγκεκριμένη θέση
- ένας αστερίσκος (*), που αντιπροσωπεύει την παρουσία μιας σκουληκότρυπας στη συγκεκριμένη θέση

Translated with DeepL.com (free version)

OUTPUT

Το αρχείο εξόδου πρέπει να είναι ένα κανονικό αρχείο κειμένου ASCII. Κάθε γραμμή του αρχείου εξόδου πρέπει να διαχωρίζεται με ένα απλό "\n". Η i-οστή γραμμή αυτού του αρχείου περιέχει τη διάταξη του i-οστού φιδιού. Κάθε γραμμή αποτελείται από:
- δύο ακέραιους αριθμούς, c και r, που αντιπροσωπεύουν τη στήλη και τη γραμμή στην οποία τοποθετείται αρχικά η κεφαλή του φιδιού
- ένα κεφαλαίο γράμμα - "U", "D", "L", "R" - που υποδηλώνει ότι το φίδι γλιστράει ένα κελί πάνω, κάτω, αριστερά ή δεξιά αντίστοιχα
- δύο ακέραιοι αριθμοί, cw και rw της σκουληκότρυπας από την οποία βγαίνει το φίδι, εάν το φίδι εισέρχεται σε μια σκουληκότρυπα.
Όλες οι τιμές σε μία γραμμή διαχωρίζονται με ένα κενό.
Αν, για οποιονδήποτε λόγο, δεν θέλετε να χρησιμοποιήσετε ένα φίδι, αφήστε τη γραμμή κενή.


Scoring rules

Δεδομένης μιας λίστας S με αναπτυγμένα φίδια, Si είναι το i-οστό φίδι μήκους l(Si). Κάθε Snake Si μπορεί να θεωρηθεί ως μια ακολουθία τμημάτων l(Si), Sij με 0 < j < l(Si).
Ας ορίσουμε V (Sij) ως τη συνάφεια του τμήματος του συστήματος που καλύπτεται από το τμήμα j του φιδιού i, όπως ορίζεται στον χάρτη εισόδου. Εάν η λύση σέβεται όλους τους περιορισμούς, τότε η τελική βαθμολογία είναι:

26 + 42 + 21 + 27 